(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const h of s.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&r(h)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerpolicy&&(s.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?s.credentials="include":i.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();class D{constructor(e,t,r,i,s){this.imgurl=e,this.x=t,this.y=r,this.height=s,this.width=i}draw(e){e.drawImage(this.imgurl,this.x,this.y,this.width,this.height)}intersects(e){let t=this.width,r=this.height,i=e.width,s=e.height;if(i<=0||s<=0||t<=0||r<=0)return!1;let h=this.x,o=this.y,y=e.x,p=e.y;return i+=y,s+=p,t+=h,r+=o,(i<y||i>h)&&(s<p||s>o)&&(t<h||t>y)&&(r<o||r>p)}}class H extends D{constructor(e,t,r,i,s,h,o){super(e,t,r,i,s),this.dx=h,this.dy=o}move(){this.x+=this.dx,this.y+=this.dy}}class b extends H{constructor(e,t,r,i,s){super(e,t,r,i,s,0,0),this.displacement=7,document.addEventListener("keydown",this.keyDownHandler.bind(this)),document.addEventListener("keyup",this.keyUpHandler.bind(this))}move(e){super.move(),this.x<0?this.x=0:this.x+this.width>e&&(this.x=e-this.width)}keyDownHandler(e){e.key==="Right"||e.key==="ArrowRight"?this.dx=this.displacement:(e.key==="Left"||e.key==="ArrowLeft")&&(this.dx=-this.displacement)}keyUpHandler(e){e.key==="Right"||e.key==="ArrowRight"?this.dx=0:(e.key==="Left"||e.key==="ArrowLeft")&&(this.dx=0)}colides(e){return!!(this.intersects(e)&&e.visible===!0)}}let A=!1;class R extends b{constructor(e,t,r,i,s,h,o){super(e,r+15,i,s,h,0,0),document.addEventListener("keydown",this.spaceHandler.bind(this)),document.addEventListener("keydown",this.keyDownHandler.bind(this)),document.addEventListener("keyup",this.keyUpHandler.bind(this)),this.visible=o,this.audio=t}draw(e){this.visible&&super.draw(e)}move(e){A===!1?(super.move(),this.x<15?this.x=15:this.x+this.width+15>e&&(this.x=e-this.width-15)):(this.y+=this.dy,this.dy=-4)}colides(e){return this.visible&&this.intersects(e)?(this.visible=!1,!0):!1}keyDownHandler(e){e.key==="Right"||e.key==="ArrowRight"?this.dx=7:(e.key==="Left"||e.key==="ArrowLeft")&&(this.dx=-7)}keyUpHandler(e){e.key==="Right"||e.key==="ArrowRight"?this.dx=0:(e.key==="Left"||e.key==="ArrowLeft")&&(this.dx=0)}spaceHandler(e){e.keyCode===32&&(this.audio.play(),A=!0)}hitTop(e){return this.y<=e-650&&this.visible?(this.visible=!1,!0):!1}}class G extends H{constructor(e,t,r,i,s,h,o){super(e,r,i,s,h,0,o),this.visible=!0,this.audio=t}move(){super.move(),Math.random()>.5?this.dx=Math.sin(Math.random())+.4:this.dx=-(Math.sin(Math.random())+.4)}draw(e){this.visible&&super.draw(e)}colides(e){return this.visible&&this.intersects(e)&&e.visible===!0?(this.visible=!1,this.audio.play(),!0):!1}colidesWithTank(e){return this.visible&&this.intersects(e)?(this.audio.play(),!0):!1}hitBottom(e){return this.y>=e-5&&this.visible===!0}}const n=document.getElementById("myCanvas"),L=new Image(50,50);L.src="./assets/tank.png";const M=new Image;M.src="./assets/missile.png";const T=new Audio("./assets/shoot.wav"),S=new Image;S.src="./assets/invader.png";const U=new Audio("./assets/explosion.wav"),m=new Audio("./assets/music.mpeg");m.loop=!0;let l=new b(L,n.width/2-25,n.height-60,50,50),_=[],u=10,f=new R(M,T,0,n.height,20,20,!1),O=[],I=Math.floor(Math.random()*(n.width-60)-(n.width-450))+n.width-450,E=Math.floor(Math.random()*(10-2))+2,x={},g=0,v=!1,k=!1;function B(){I=Math.floor(Math.random()*(n.width-60)-(n.width-450))+n.width-450,E=Math.floor(Math.random()*(5-1))+1,x=new G(S,U,I,n.height-600,40,40,E),O.push(x),setTimeout(B,Math.random()*(3e3-800)+800)}class ${constructor(e,t){this.canvaswidth=e,this.canvashight=t,document.addEventListener("keyup",this.keyStart.bind(this)),document.addEventListener("keydown",this.keySpaceHandler.bind(this))}keySpaceHandler(e){e.keyCode===32&&u>0&&(f=new R(M,T,l.x,n.height-60,20,20,!0),_.push(f),u--)}keyStart(e){if(v===!0)return!0;(e.key==="ArrowLeft"||e.key==="ArrowRight")&&(v=!0,v===!0&&(m.play(),B()))}draw(e){e.font="16px Arial",e.fillStyle="rgb(0, 149, 246)",e.fillText(`Invaders shot down: ${g}`,10,20),e.fillText(`Missiles remaining: ${u}`,10,40),l.draw(e),l.move(n.width),l.colides(x),_.forEach(t=>{t.draw(e),t.move(n.width),t.hitTop(n.height)&&(u++,delete t.Missiles)}),O.forEach(t=>{t.draw(e),t.move(),t.colides(f)&&(g++,f.colides(t),u<10&&(u++,delete f.Missiles,delete t.Invaders)),t.colidesWithTank(l)&&(l.colides(t),delete t.Invaders,m.pause(),k=!0),t.hitBottom(n.height)&&(delete t.Invaders,m.pause(),k=!0)})}gameover(){return!!k}return_score(){return g}end_page(e){l=new b(L,n.width/2-25,n.height-60,50,50),l.draw(e)}}const a=document.getElementById("myCanvas"),c=a.getContext("2d"),w=new $(a.width,a.height);function C(){if(c.clearRect(0,0,a.width,a.height),w.gameover()===!1)w.draw(c);else{let d=w.return_score();c.clearRect(0,0,a.width,a.height),c.fillText(`Invaders shot down: ${d}`,10,20),c.fillText("Game Over!",10,40),w.end_page(c)}window.requestAnimationFrame(C)}w.onload=C();
